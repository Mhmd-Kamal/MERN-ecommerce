{"version":3,"sources":["api/UserAPI.js","api/ProductsAPI.js","api/CategoriesAPI.js","GlobalState.js","components/headers/icon/menu.svg","components/headers/icon/close.svg","components/headers/icon/cart.svg","components/headers/Header.js","components/mainpages/utils/productItem/BtnRender.js","components/mainpages/utils/productItem/ProductItem.js","components/mainpages/utils/loading/Loading.js","components/mainpages/products/Filters.js","components/mainpages/products/LoadMore.js","components/mainpages/products/Products.js","components/mainpages/detailProduct/DetailProduct.js","components/mainpages/cart/Cart.js","components/mainpages/auth/Login.js","components/mainpages/auth/Register.js","components/mainpages/utils/not_found/NotFound.js","components/mainpages/history/OrderHistory.js","components/mainpages/history/OrderDetails.js","components/mainpages/categories/Categories.js","components/mainpages/createProduct/CreateProduct.js","components/mainpages/Pages.js","App.js","index.js"],"names":["UserAPI","token","useState","isLogged","setIsLogged","isAdmin","setIsAdmin","cart","setCart","history","setHistory","addCart","product","a","alert","every","item","_id","quantity","axios","patch","headers","Authorization","useEffect","get","res","data","role","response","msg","getUser","ProductsAPI","products","setProducts","callback","setCallback","category","setCategory","sort","setSort","search","setSearch","page","setpage","result","setResult","number","console","log","getProducts","CategoriesAPI","categories","setCategories","getCategories","GlobalState","createContext","DataProvider","children","setToken","localStorage","getItem","refreshToken","accessToken","setTimeout","state","userAPI","categoriesAPI","Provider","value","Header","useContext","menu","setMenu","logoutUser","removeItem","window","location","href","styleMenu","left","className","onClick","src","Menu","alt","width","to","style","Close","length","Cart","BtnRender","deleteProduct","id","images","public_id","ProductItem","handleCheck","type","checked","onChange","url","title","price","description","Loading","loading","setLoading","t","clearTimeout","Filters","name","e","target","map","placeholder","LoadMore","setPage","Products","setCallBack","isCheck","setIsCheck","post","delete","forEach","DetailProduct","useParams","detailProduct","setDetailProduct","find","product_id","content","sold","total","setTotal","reduce","pre","getTotal","addTocart","tranSuccess","payment","paymentID","address","payer","textAlign","fontSize","confirm","index","splice","amount","size","color","shape","label","tagline","onSuccess","details","given_name","Login","email","password","user","setUser","onChangeInput","loginSubmit","preventDefault","setItem","onSubmit","required","autoComplete","Register","registerSubmit","NotFound","OrderHistory","getHistory","Date","createdAt","toLocaleDateString","OrderDetails","orderDetails","setOrderDetails","address_line_1","admin_area_2","postal_code","country_code","Categories","setId","onEdit","setOnEdit","createCategory","put","deleteCategory","htmlFor","editCategory","initialState","CreateProduct","setProduct","setImages","useHistory","styleUpload","display","handleUpload","file","files","formData","FormData","append","handleDestroy","handleChange","handleSubmit","push","disabled","rows","Pages","exact","path","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.4ecc872e.chunk.js","sourcesContent":["import { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nfunction UserAPI(token) {\r\n  const [isLogged, setIsLogged] = useState(false);\r\n  const [isAdmin, setIsAdmin] = useState(false);\r\n  const [cart, setCart] = useState([]);\r\n  const [history, setHistory] = useState([]);\r\n\r\n  const addCart = async (product) => {\r\n    if (!isLogged) return alert('Please login to continue buying');\r\n\r\n    const check = cart.every((item) => item._id !== product._id); //todo use  \"cart.includes(product)\" instead\r\n\r\n    if (check) {\r\n      setCart([...cart, { ...product, quantity: 1 }]);\r\n\r\n      await axios.patch(\r\n        '/user/addcart',\r\n        { cart: [...cart, { ...product, quantity: 1 }] },\r\n        { headers: { Authorization: token } }\r\n      );\r\n    } else {\r\n      alert('This product has been added to cart.');\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (token) {\r\n      const getUser = async () => {\r\n        try {\r\n          const res = await axios.get('/user/infor', {\r\n            headers: { Authorization: token },\r\n          });\r\n\r\n          setIsLogged(true);\r\n          res.data.role === 1 ? setIsAdmin(true) : setIsAdmin(false);\r\n\r\n          setCart(res.data.cart);\r\n        } catch (err) {\r\n          alert(err.response.data.msg);\r\n        }\r\n      };\r\n      getUser();\r\n    }\r\n  }, [token]);\r\n\r\n  return {\r\n    isLogged: [isLogged, setIsLogged],\r\n    isAdmin: [isAdmin, setIsAdmin],\r\n    cart: [cart, setCart],\r\n    history: [history, setHistory],\r\n    addCart: addCart,\r\n  };\r\n}\r\n\r\nexport default UserAPI;\r\n","import { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nfunction ProductsAPI() {\r\n  const [products, setProducts] = useState([]);\r\n  const [callback, setCallback] = useState(false);\r\n  const [category, setCategory] = useState('');\r\n  const [sort, setSort] = useState('');\r\n  const [search, setSearch] = useState('');\r\n  const [page, setpage] = useState(1);\r\n  const [result, setResult] = useState(0);\r\n\r\n  useEffect(() => {\r\n    const getProducts = async () => {\r\n      const res = await axios.get(\r\n        `/api/products?limit=${page * 9}&${category}&${sort}&title[regex]=${search}`\r\n      );\r\n      setProducts(res.data.products);\r\n      setResult(res.data.number);\r\n      console.log(res);\r\n    };\r\n\r\n    getProducts();\r\n  }, [callback, category, page, search, sort]);\r\n\r\n  return {\r\n    products: [products, setProducts],\r\n    callback: [callback, setCallback],\r\n    category: [category, setCategory],\r\n    sort: [sort, setSort],\r\n    search: [search, setSearch],\r\n    page: [page, setpage],\r\n    result: [result, setResult],\r\n  };\r\n}\r\n\r\nexport default ProductsAPI;\r\n","import { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nfunction CategoriesAPI() {\r\n  const [categories, setCategories] = useState([]);\r\n  const [callback, setCallback] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const getCategories = async () => {\r\n      const res = await axios.get('/api/category');\r\n      setCategories(res.data.msg);\r\n    };\r\n\r\n    getCategories();\r\n  }, [callback]);\r\n\r\n  return {\r\n    categories: [categories, setCategories],\r\n    callback: [callback, setCallback],\r\n  };\r\n}\r\n\r\nexport default CategoriesAPI;\r\n","import React, { useState, createContext, useEffect } from 'react';\r\nimport UserAPI from './api/UserAPI';\r\nimport ProductsAPI from './api/ProductsAPI';\r\nimport CategoriesAPI from './api/CategoriesAPI';\r\n\r\nimport axios from 'axios';\r\n\r\nexport const GlobalState = createContext();\r\n\r\nexport const DataProvider = ({ children }) => {\r\n  const [token, setToken] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const firstLogin = localStorage.getItem('firstLogin');\r\n\r\n    if (firstLogin) {\r\n      const refreshToken = async () => {\r\n        const res = await axios.get('/user/refresh_token');\r\n        setToken(res.data.accessToken);\r\n\r\n        setTimeout(() => {\r\n          refreshToken();\r\n        }, 10 * 60 * 1000);\r\n      };\r\n      refreshToken();\r\n    }\r\n  }, []);\r\n\r\n  const state = {\r\n    token: [token, setToken],\r\n    ProductsAPI: ProductsAPI(),\r\n    userAPI: UserAPI(token),\r\n    categoriesAPI: CategoriesAPI(),\r\n  };\r\n\r\n  return <GlobalState.Provider value={state}>{children}</GlobalState.Provider>;\r\n};\r\n","export default __webpack_public_path__ + \"static/media/menu.e8db7520.svg\";","export default __webpack_public_path__ + \"static/media/close.ea7c95d7.svg\";","export default __webpack_public_path__ + \"static/media/cart.d146d6c3.svg\";","import React, { useContext, useState } from 'react';\r\nimport { GlobalState } from '../../GlobalState';\r\nimport axios from 'axios';\r\n\r\nimport Menu from './icon/menu.svg';\r\nimport Close from './icon/close.svg';\r\nimport Cart from './icon/cart.svg';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction Header() {\r\n  const state = useContext(GlobalState);\r\n  const [isLogged] = state.userAPI.isLogged;\r\n  const [isAdmin] = state.userAPI.isAdmin;\r\n  const [cart] = state.userAPI.cart;\r\n  const [menu, setMenu] = useState(false);\r\n  const logoutUser = async () => {\r\n    await axios.get('/user/logout');\r\n\r\n    localStorage.removeItem('firstLogin');\r\n\r\n    window.location.href = '/'; //todo  use <redirect/>\r\n  };\r\n\r\n  const adminRouter = () => (\r\n    <>\r\n      <li>\r\n        <Link to='/create_product'>Create Product</Link>\r\n      </li>\r\n      <li>\r\n        <Link to='/category'>Categories</Link>\r\n      </li>\r\n    </>\r\n  );\r\n\r\n  const loggedRouter = () => (\r\n    <>\r\n      <li>\r\n        <Link to='/history'>History</Link>\r\n      </li>\r\n      <li>\r\n        <Link to='/' onClick={logoutUser}>\r\n          Logout\r\n        </Link>\r\n      </li>\r\n    </>\r\n  );\r\n\r\n  const styleMenu = {\r\n    left: menu ? 0 : '-100%',\r\n  };\r\n  return (\r\n    <header>\r\n      <div className='menu' onClick={() => setMenu(!menu)}>\r\n        <img src={Menu} alt='' width='30' />\r\n      </div>\r\n\r\n      <div className='logo'>\r\n        <h1>\r\n          <Link to='/'>{isAdmin ? 'Admin' : 'Ecommerce Shop'}</Link>\r\n        </h1>\r\n      </div>\r\n\r\n      <ul style={styleMenu}>\r\n        <li>\r\n          <Link to='/'>{isAdmin ? 'Prodcucts' : 'Shop'}</Link>\r\n        </li>\r\n        {isAdmin && adminRouter()}\r\n        {isLogged ? (\r\n          loggedRouter()\r\n        ) : (\r\n          <li>\r\n            <Link to='/login'>Login -or- Register</Link>\r\n          </li>\r\n        )}\r\n\r\n        <li onClick={() => setMenu(!menu)}>\r\n          <img src={Close} alt='' width='30' className='menu' />\r\n        </li>\r\n      </ul>\r\n      {isAdmin ? (\r\n        ''\r\n      ) : (\r\n        <div className='cart-icon'>\r\n          <span>{cart.length}</span>\r\n          <Link to='/cart'>\r\n            <img src={Cart} alt='' width='30' />\r\n          </Link>\r\n        </div>\r\n      )}\r\n    </header>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","import React, { useContext } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { GlobalState } from '../../../../GlobalState';\r\n\r\nfunction BtnRender({ product, deleteProduct }) {\r\n  const state = useContext(GlobalState);\r\n  const [isAdmin] = state.userAPI.isAdmin;\r\n  const { addCart } = state.userAPI;\r\n\r\n  return (\r\n    <div className='row_btn'>\r\n      {isAdmin ? (\r\n        <>\r\n          <Link\r\n            id='btn_buy'\r\n            to='#!'\r\n            onClick={() => deleteProduct(product._id, product.images.public_id)}\r\n          >\r\n            Delete\r\n          </Link>\r\n          <Link id='btn_view' to={`/edit_product/${product._id}`}>\r\n            Edit\r\n          </Link>\r\n        </>\r\n      ) : (\r\n        <>\r\n          <Link id='btn_buy' to='#!' onClick={() => addCart(product)}>\r\n            Buy\r\n          </Link>\r\n          <Link id='btn_view' to={`/detail/${product._id}`}>\r\n            View\r\n          </Link>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default BtnRender;\r\n","import React from 'react';\r\n\r\nimport BtnRender from './BtnRender';\r\n\r\nfunction ProductItem({ product, isAdmin, deleteProduct, handleCheck }) {\r\n  return (\r\n    <div className='product_card'>\r\n      {isAdmin && (\r\n        <input\r\n          type='checkbox'\r\n          checked={product.checked}\r\n          onChange={() => handleCheck(product._id)}\r\n        />\r\n      )}\r\n\r\n      <img src={product.images.url} alt='' />\r\n      <div className='product_box'>\r\n        <h2 title={product.title}>{product.title}</h2>\r\n        <span>${product.price}</span>\r\n        <p>{product.description}</p>\r\n      </div>\r\n\r\n      <BtnRender product={product} deleteProduct={deleteProduct} />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ProductItem;\r\n","import React, { useState, useEffect } from 'react';\r\nimport './loading.css';\r\n\r\nfunction Loading() {\r\n  const [loading, setLoading] = useState('Loading');\r\n  useEffect(() => {\r\n    const t = setTimeout(() => {\r\n      if (loading === 'Loading...') setLoading('Loading');\r\n      setLoading((loading) => loading + '.');\r\n    }, 1000);\r\n    return () => {\r\n      clearTimeout(t);\r\n    };\r\n  }, [loading]);\r\n  return <div className='loading'>{loading}</div>;\r\n}\r\n\r\nexport default Loading;\r\n","import React, { useContext } from 'react';\r\nimport CategoriesAPI from '../../../api/CategoriesAPI';\r\nimport { GlobalState } from '../../../GlobalState';\r\n\r\nfunction Filters() {\r\n  const state = useContext(GlobalState);\r\n  const [categories] = state.categoriesAPI.categories;\r\n\r\n  const [category, setCategory] = state.ProductsAPI.category;\r\n  const [sort, setSort] = state.ProductsAPI.sort;\r\n  const [search, setSearch] = state.ProductsAPI.search;\r\n\r\n  const handleCategory = (e) => {\r\n    setCategory(e.target.value);\r\n    setSearch('');\r\n  };\r\n\r\n  return (\r\n    <div className='filter_menu'>\r\n      <div className='row'>\r\n        <span>Filters: </span>\r\n        <select name='category' onChange={handleCategory}>\r\n          <option value=''>All Products</option>\r\n          {categories.map((category) => (\r\n            <option value={'category=' + category._id} key={category._id}>\r\n              {\r\n                //todo remove'category=' and add it in the url in Products.js\r\n              }\r\n              {category.name}\r\n            </option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n      <input\r\n        type='text'\r\n        value={search}\r\n        placeholder='Search Here!'\r\n        onChange={(e) => setSearch(e.target.value)}\r\n      />\r\n\r\n      <div className='row'>\r\n        <span>Filters: </span>\r\n        <select name='sort' onChange={(e) => setSort(e.target.value)}>\r\n          <option value=''>Newest</option>\r\n          <option value='sort=oldest'>Oldest</option>\r\n          <option value='sort=-sold'>Best Sale</option>\r\n          <option value='sort=-price'>Price: high to low</option>\r\n          <option value='sort=price'>Price: low to high</option>\r\n        </select>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Filters;\r\n","import React, { useContext } from 'react';\r\nimport { GlobalState } from '../../../GlobalState';\r\n\r\nfunction LoadMore() {\r\n  const state = useContext(GlobalState);\r\n  const [page, setPage] = state.ProductsAPI.page;\r\n  const [result] = state.ProductsAPI.result;\r\n  return (\r\n    <div className='load_more'>\r\n      {result < page * 9 ? '' : <button onClick={(e) => setPage(page + 1)}>Load more</button>}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default LoadMore;\r\n","import React, { useContext, useState } from 'react';\r\nimport { GlobalState } from '../../../GlobalState';\r\nimport ProductItem from '../utils/productItem/ProductItem';\r\nimport Loading from '../utils/loading/Loading';\r\nimport axios from 'axios';\r\nimport Filters from './Filters';\r\nimport LoadMore from './LoadMore';\r\n\r\nfunction Products() {\r\n  const state = useContext(GlobalState);\r\n  const [products, setProducts] = state.ProductsAPI.products;\r\n  const [isAdmin] = state.userAPI.isAdmin;\r\n  const [token] = state.token;\r\n  const [callback, setCallBack] = state.ProductsAPI.callback;\r\n  const [loading, setLoading] = useState(false);\r\n  const [isCheck, setIsCheck] = useState(false);\r\n\r\n  const deleteProduct = async (id, public_id) => {\r\n    setLoading(true);\r\n\r\n    await axios.post(\r\n      '/api/destroy',\r\n      { public_id: public_id },\r\n      { headers: { Authorization: token } }\r\n    );\r\n\r\n    await axios.delete(`/api/products/${id}`, {\r\n      headers: { Authorization: token },\r\n    });\r\n\r\n    setCallBack(!callback);\r\n    setLoading(false);\r\n  };\r\n\r\n  const handleCheck = async (id) => {\r\n    products.forEach((product) => {\r\n      if (product._id === id) product.checked = !product.checked;\r\n    });\r\n\r\n    setProducts([...products]);\r\n  };\r\n\r\n  const checkAll = () => {\r\n    products.forEach((product) => {\r\n      product.checked = !isCheck;\r\n    });\r\n\r\n    setProducts([...products]);\r\n    setIsCheck(!isCheck);\r\n  };\r\n\r\n  const deleteAll = () => {\r\n    products.forEach((product) => {\r\n      if (product.checked) deleteProduct(product._id, product.images.public_id);\r\n    });\r\n  };\r\n\r\n  if (loading) return <Loading />;\r\n\r\n  return (\r\n    <>\r\n      <Filters />\r\n      {isAdmin && (\r\n        <div className='delete-all'>\r\n          <span>Select All</span>\r\n          <input type='checkbox' value={isCheck} onChange={checkAll} />\r\n          <button onClick={deleteAll}>Delete All</button>\r\n        </div>\r\n      )}\r\n      <div className='products'>\r\n        {products.map((product) => (\r\n          <ProductItem\r\n            key={product._id}\r\n            product={product}\r\n            isAdmin={isAdmin}\r\n            deleteProduct={deleteProduct}\r\n            handleCheck={handleCheck}\r\n          />\r\n        ))}\r\n      </div>\r\n      <LoadMore />\r\n      {products.length === 0 && <Loading />}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Products;\r\n","import React, { useContext, useEffect, useState } from 'react';\r\nimport { GlobalState } from '../../../GlobalState';\r\nimport { Link, useParams } from 'react-router-dom';\r\nimport ProductItem from '../utils/productItem/ProductItem';\r\nfunction DetailProduct() {\r\n  const { id } = useParams();\r\n  const state = useContext(GlobalState);\r\n  const addCart = state.userAPI.addCart;\r\n  const [products] = state.ProductsAPI.products;\r\n  const [detailProduct, setDetailProduct] = useState([]);\r\n\r\n  // useEffect(() => {\r\n  //   console.log('run');\r\n  //   if (params) {\r\n  //     products.forEach((product) => {\r\n  //       if (product._id === params.id) setDetailProduct(product);\r\n  //     });\r\n  //   }\r\n  // }, [products, params]);\r\n\r\n  // console.log(products, params);\r\n  useEffect(() => {\r\n    // console.log('rerender');\r\n\r\n    const product = products.find((product) => product._id === id);\r\n    if (product) setDetailProduct(product);\r\n  }, [products, id]);\r\n  // console.log(detailProduct);\r\n\r\n  if (detailProduct.length === 0) return null;\r\n\r\n  return (\r\n    <>\r\n      <div className='detail'>\r\n        <img src={detailProduct.images.url} alt='' />\r\n        <div className='box-detail'>\r\n          <div className='row'>\r\n            <h2>{detailProduct.title}</h2>\r\n            <h6>#id: {detailProduct.product_id}</h6>\r\n          </div>\r\n          <span>$ {detailProduct.price}</span>\r\n          <p>{detailProduct.description}</p>\r\n          <p>{detailProduct.content}</p>\r\n          <p>sold: {detailProduct.sold}</p>\r\n          <Link\r\n            to='/cart'\r\n            className='cart'\r\n            onClick={() => addCart(detailProduct)}\r\n          >\r\n            Buy Now\r\n          </Link>\r\n        </div>\r\n      </div>\r\n\r\n      <div>\r\n        <h2>Related products</h2>\r\n        <div className='products'>\r\n          {products.map((product) =>\r\n            product.category === detailProduct.category ? (\r\n              <ProductItem key={product._id} product={product} />\r\n            ) : null\r\n          )}\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default DetailProduct;\r\n","import React, { useContext, useEffect, useState } from 'react';\r\nimport { GlobalState } from '../../../GlobalState';\r\nimport axios from 'axios';\r\n// import PayPalButton from './PayPalButton';\r\nimport { PayPalButton } from 'react-paypal-button-v2';\r\n\r\nfunction Cart() {\r\n  const state = useContext(GlobalState);\r\n  const [token] = state.token;\r\n  const [cart, setCart] = state.userAPI.cart;\r\n  const [total, setTotal] = useState(0);\r\n\r\n  useEffect(() => {\r\n    const getTotal = () => {\r\n      const total = cart.reduce((pre, item) => {\r\n        return pre + item.price * item.quantity;\r\n      }, 0);\r\n      setTotal(total);\r\n    };\r\n    getTotal();\r\n  }, [cart]);\r\n\r\n  const addTocart = async (cart) => {\r\n    await axios.patch(\r\n      '/user/addcart',\r\n      { cart },\r\n      { headers: { Authorization: token } }\r\n    );\r\n  };\r\n  const increment = (id) => {\r\n    cart.forEach((item) => {\r\n      if (id === item._id) item.quantity += 1;\r\n    });\r\n    setCart([...cart]);\r\n    addTocart(cart);\r\n  };\r\n\r\n  const decrement = (id) => {\r\n    cart.forEach((item) => {\r\n      if (id === item._id)\r\n        item.quantity === 1 ? (item.quantity = 1) : (item.quantity -= 1);\r\n    });\r\n    setCart([...cart]);\r\n    addTocart(cart);\r\n  };\r\n\r\n  const removeProduct = (id) => {\r\n    if (window.confirm('Do you want to delete this product')) {\r\n      cart.forEach((item, index) => {\r\n        if (item._id === id) cart.splice(index, 1);\r\n      });\r\n\r\n      setCart([...cart]);\r\n      addTocart(cart);\r\n    }\r\n  };\r\n\r\n  const tranSuccess = async (payment) => {\r\n    const {\r\n      id: paymentID,\r\n      payer: { address },\r\n    } = payment;\r\n\r\n    await axios.post(\r\n      '/api/payment',\r\n      { cart, paymentID, address },\r\n      { headers: { Authorization: token } }\r\n    );\r\n\r\n    setCart([]);\r\n    addTocart([]);\r\n    alert('You have successfully placed an order.');\r\n  };\r\n\r\n  if (cart.length === 0)\r\n    return (\r\n      <h2 style={{ textAlign: 'center', fontSize: '4rem' }}>Cart Empty</h2>\r\n    );\r\n\r\n  const style = {\r\n    size: 'small',\r\n    color: 'blue',\r\n    shape: 'rect',\r\n    label: 'checkout',\r\n    tagline: false,\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {cart.map((product) => (\r\n        <div className='detail cart' key={product._id}>\r\n          <img src={product.images.url} alt='' />\r\n\r\n          <div className='box-detail'>\r\n            <h2>{product.title}</h2>\r\n            <h3>$ {product.price * product.quantity}</h3>\r\n            <p>{product.description}</p>\r\n            <p>{product.content}</p>\r\n\r\n            <div className='amount'>\r\n              <button\r\n                onClick={() => {\r\n                  decrement(product._id);\r\n                }}\r\n              >\r\n                {' '}\r\n                -{' '}\r\n              </button>\r\n              <span>{product.quantity}</span>\r\n              <button\r\n                onClick={() => {\r\n                  increment(product._id);\r\n                }}\r\n              >\r\n                {' '}\r\n                +{' '}\r\n              </button>\r\n            </div>\r\n            <div\r\n              className='delete'\r\n              onClick={() => {\r\n                removeProduct(product._id);\r\n              }}\r\n            >\r\n              X\r\n            </div>\r\n          </div>\r\n        </div>\r\n      ))}\r\n\r\n      <div className='total'>\r\n        <h3>Total: $ {total}</h3>\r\n        {/* <PayPalButton total={total} tranSuccess={tranSuccess} /> */}\r\n        <PayPalButton\r\n          amount={total}\r\n          style={style}\r\n          // shippingPreference=\"NO_SHIPPING\" // default is \"GET_FROM_FILE\"\r\n          onSuccess={(details) => {\r\n            console.log(details);\r\n            tranSuccess(details);\r\n            alert('Transaction completed by ' + details.payer.name.given_name);\r\n          }}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Cart;\r\n","import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction Login() {\r\n  const [user, setUser] = useState({\r\n    email: '',\r\n    password: '',\r\n  });\r\n\r\n  const onChangeInput = (e) => {\r\n    const { name, value } = e.target;\r\n    setUser({ ...user, [name]: value });\r\n  };\r\n\r\n  const loginSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      await axios.post('/user/login', { ...user });\r\n\r\n      localStorage.setItem('firstLogin', true);\r\n\r\n      window.location.href = '/';\r\n    } catch (err) {\r\n      alert(err.response.data.msg);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className='login-page'>\r\n      <form onSubmit={loginSubmit}>\r\n        <h2>Login</h2>\r\n        <input\r\n          type='email'\r\n          name='email'\r\n          required\r\n          placeholder='Email'\r\n          value={user.email}\r\n          onChange={onChangeInput}\r\n        />\r\n        <input\r\n          type='password'\r\n          name='password'\r\n          required\r\n          autoComplete='on'\r\n          placeholder='Password'\r\n          value={user.password}\r\n          onChange={onChangeInput}\r\n        />\r\n        <div className='row'>\r\n          <button type='submit'>Login</button>\r\n          <Link to='/register'>Register</Link>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction Register() {\r\n  const [user, setUser] = useState({\r\n    name: '',\r\n    email: '',\r\n    password: '',\r\n  });\r\n\r\n  const onChangeInput = (e) => {\r\n    const { name, value } = e.target;\r\n    setUser({ ...user, [name]: value });\r\n  };\r\n\r\n  const registerSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      await axios.post('/user/register', { ...user });\r\n\r\n      localStorage.setItem('firstLogin', true);\r\n\r\n      window.location.href = '/'; //todo : change this to react-router <Redirect/>\r\n    } catch (err) {\r\n      alert(err.response.data.msg);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className='login-page'>\r\n      <form onSubmit={registerSubmit}>\r\n        <h2>Register</h2>\r\n        <input\r\n          type='text'\r\n          name='name'\r\n          required\r\n          placeholder='Name'\r\n          value={user.name}\r\n          onChange={onChangeInput}\r\n        />\r\n        <input\r\n          type='email'\r\n          name='email'\r\n          required\r\n          placeholder='Email'\r\n          value={user.email}\r\n          onChange={onChangeInput}\r\n        />\r\n        <input\r\n          type='password'\r\n          name='password'\r\n          required\r\n          autoComplete='on'\r\n          placeholder='Password'\r\n          value={user.password}\r\n          onChange={onChangeInput}\r\n        />\r\n        <div className='row'>\r\n          <button type='submit'>Register</button>\r\n          <Link to='/login'>Login</Link>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Register;\r\n","import React from 'react';\r\n\r\nfunction NotFound() {\r\n  return <div>404 | not found</div>;\r\n}\r\n\r\nexport default NotFound;\r\n","import React, { useContext, useEffect } from 'react';\r\nimport { GlobalState } from '../../../GlobalState';\r\nimport { Link } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nfunction OrderHistory() {\r\n  const state = useContext(GlobalState);\r\n  const [history, setHistory] = state.userAPI.history;\r\n  const [isAdmin] = state.userAPI.isAdmin;\r\n  const [token] = state.token;\r\n\r\n  useEffect(() => {\r\n    const getHistory = async () => {\r\n      if (isAdmin) {\r\n        const res = await axios.get('/api/payment', {\r\n          headers: { Authorization: token },\r\n        });\r\n        setHistory(res.data);\r\n      } else {\r\n        const res = await axios.get('/user/history', {\r\n          headers: { Authorization: token },\r\n        });\r\n        setHistory(res.data);\r\n      }\r\n    };\r\n    getHistory();\r\n  }, [token, isAdmin, setHistory]);\r\n\r\n  return (\r\n    <div className='history-page'>\r\n      <h2>History</h2>\r\n      <h4>You have {history.length} orders</h4>\r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            <th>Payment ID</th>\r\n            <th>Date of Purchased</th>\r\n            <th></th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {history.map((item) => (\r\n            <tr key={item._id}>\r\n              <td>{item.paymentID}</td>\r\n              <td>{new Date(item.createdAt).toLocaleDateString()}</td>\r\n              <td>\r\n                <Link to={`/history/${item._id}`}>View</Link>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default OrderHistory;\r\n","import React, { useState, useContext, useEffect } from 'react';\r\nimport { GlobalState } from '../../../GlobalState';\r\nimport { useParams } from 'react-router-dom';\r\n\r\nfunction OrderDetails() {\r\n  const state = useContext(GlobalState);\r\n  const [history] = state.userAPI.history;\r\n  const [orderDetails, setOrderDetails] = useState([]);\r\n  const { id } = useParams();\r\n\r\n  useEffect(() => {\r\n    if (id) {\r\n      history.forEach((item) => {\r\n        if (item._id === id) setOrderDetails(item);\r\n      });\r\n    }\r\n  }, [id, history]);\r\n\r\n  // useEffect(() => {\r\n  //   setOrderDetails(history.filter((item) => item._id === id));\r\n  // }, [history, id]);\r\n\r\n  if (orderDetails.length === 0) return null;\r\n\r\n  // console.log(orderDetails, 'render');\r\n  return (\r\n    <div className='history-page'>\r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            <th>Name</th>\r\n            <th>Address</th>\r\n            <th>Postal Code</th>\r\n            <th>Country Code</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <tr>\r\n            <td>{orderDetails.name}</td>\r\n            <td>\r\n              {orderDetails.address.address_line_1 +\r\n                '-' +\r\n                orderDetails.address.admin_area_2}\r\n            </td>\r\n            <td>{orderDetails.address.postal_code}</td>\r\n            <td>{orderDetails.address.country_code}</td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n\r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            <th></th>\r\n            <th>Products</th>\r\n            <th>Quantity</th>\r\n            <th>Price</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {orderDetails.cart.map((item) => (\r\n            <tr key={item._id}>\r\n              <td>\r\n                <img src={item.images.url} alt='' />\r\n              </td>\r\n              <td>{item.title}</td>\r\n              <td>{item.quantity}</td>\r\n              <td>$ {item.price * item.quantity}</td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default OrderDetails;\r\n","import axios from 'axios';\r\nimport React, { useContext, useState } from 'react';\r\nimport { GlobalState } from '../../../GlobalState';\r\n\r\nfunction Categories() {\r\n  const state = useContext(GlobalState);\r\n  const [token] = state.token;\r\n  const [categories] = state.categoriesAPI.categories;\r\n  const [callback, setCallback] = state.categoriesAPI.callback;\r\n  const [category, setCategory] = useState('');\r\n  const [id, setId] = useState('');\r\n  const [onEdit, setOnEdit] = useState(false);\r\n\r\n  const createCategory = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      if (!onEdit) {\r\n        const res = await axios.post(\r\n          '/api/category',\r\n          { name: category },\r\n          { headers: { Authorization: token } }\r\n        );\r\n        alert(res.data.msg);\r\n      } else {\r\n        const res = await axios.put(\r\n          `/api/category/${id}`,\r\n          { name: category },\r\n          { headers: { Authorization: token } }\r\n        );\r\n        alert(res.data.msg);\r\n      }\r\n      setOnEdit(false);\r\n      setCallback(!callback);\r\n      setCategory('');\r\n    } catch (err) {\r\n      alert(err.response.data.msg);\r\n    }\r\n  };\r\n\r\n  const editCategory = (id, name) => {\r\n    setCategory(name);\r\n    setId(id);\r\n    setOnEdit(true);\r\n  };\r\n\r\n  const deleteCategory = async (id) => {\r\n    try {\r\n      const res = await axios.delete(`/api/category/${id}`, {\r\n        headers: { Authorization: token },\r\n      });\r\n      alert(res.data.msg);\r\n      setCallback(!callback);\r\n    } catch (err) {\r\n      alert(err.response.data.msg);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className='categories'>\r\n      <form onSubmit={createCategory}>\r\n        <label htmlFor='category'>Category</label>\r\n        <input\r\n          type='text'\r\n          name='category'\r\n          value={category}\r\n          required\r\n          onChange={(e) => setCategory(e.target.value)}\r\n        />\r\n        <button type='submit'>{onEdit ? 'Update' : 'Create'}</button>\r\n      </form>\r\n      <div className='col'>\r\n        {categories.map((category) => (\r\n          <div className='row' key={category._id}>\r\n            <p>{category.name}</p>\r\n            <div>\r\n              <button onClick={() => editCategory(category._id, category.name)}>\r\n                Edit\r\n              </button>\r\n              <button onClick={() => deleteCategory(category._id)}>\r\n                Delete\r\n              </button>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Categories;\r\n","import React, { useContext, useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useHistory, useParams } from 'react-router-dom';\r\n\r\nimport { GlobalState } from '../../../GlobalState';\r\nimport Loading from '../utils/loading/Loading';\r\n\r\nconst initialState = {\r\n  product_id: '',\r\n  title: '',\r\n  price: 0,\r\n  description: '',\r\n  content: '',\r\n  category: '',\r\n  _id: '',\r\n};\r\n\r\nfunction CreateProduct() {\r\n  const state = useContext(GlobalState);\r\n  const [product, setProduct] = useState(initialState);\r\n  const [categories] = state.categoriesAPI.categories;\r\n  const [loading, setLoading] = useState(false);\r\n  const [images, setImages] = useState(false);\r\n  const [isAdmin] = state.userAPI.isAdmin;\r\n  const [token] = state.token;\r\n  const [products] = state.ProductsAPI.products;\r\n  const [onEdit, setOnEdit] = useState(false);\r\n  const [callback, setCallback] = state.ProductsAPI.callback;\r\n\r\n  const history = useHistory();\r\n  const { id } = useParams();\r\n\r\n  useEffect(() => {\r\n    if (id) {\r\n      setOnEdit(true);\r\n      products.forEach((product) => {\r\n        if (product._id === id) {\r\n          setProduct(product);\r\n          setImages(product.images);\r\n        }\r\n      });\r\n    } else {\r\n      setOnEdit(false);\r\n      setProduct(initialState);\r\n      setImages(false);\r\n    }\r\n  }, [id, products]);\r\n\r\n  const styleUpload = {\r\n    display: images ? 'block' : 'none',\r\n  };\r\n\r\n  const handleUpload = async (e) => {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      if (!isAdmin) return alert('You are not an Admin.');\r\n\r\n      const file = e.target.files[0];\r\n      if (!file) return alert('No file has been selected.');\r\n      if (file.size > 1024 * 1024) return alert('File is too large.');\r\n\r\n      if (file.type !== 'image/png' && file.type !== 'image/jpeg')\r\n        return alert('Worng file type.');\r\n\r\n      const formData = new FormData();\r\n      formData.append('file', file);\r\n\r\n      setLoading(true);\r\n\r\n      const res = await axios.post('/api/upload', formData, {\r\n        headers: {\r\n          'content-type': 'multipart/form-data',\r\n          Authorization: token,\r\n        },\r\n      });\r\n\r\n      setLoading(false);\r\n      setImages(res.data);\r\n    } catch (err) {\r\n      alert(err.response.data.msg);\r\n    }\r\n  };\r\n\r\n  const handleDestroy = async () => {\r\n    try {\r\n      if (!isAdmin) return alert('You are not an Admin.');\r\n\r\n      setLoading(true);\r\n\r\n      await axios.post(\r\n        '/api/destroy',\r\n        { public_id: images.public_id },\r\n        {\r\n          headers: { Authorization: token },\r\n        }\r\n      );\r\n\r\n      setLoading(false);\r\n      setImages(false);\r\n    } catch (err) {\r\n      alert(err.response.data.msg);\r\n    }\r\n  };\r\n\r\n  const handleChange = (e) => {\r\n    const { name, value } = e.target;\r\n\r\n    setProduct({ ...product, [name]: value });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      if (!isAdmin) return alert('You are not an Admin.');\r\n      if (!images) return alert('No images are uploaded.');\r\n\r\n      if (onEdit) {\r\n        await axios.put(\r\n          `/api/products/${product._id}`,\r\n          { ...product, images },\r\n          { headers: { Authorization: token } }\r\n        );\r\n      } else {\r\n        await axios.post(\r\n          '/api/products',\r\n          { ...product, images },\r\n          { headers: { Authorization: token } }\r\n        );\r\n      }\r\n\r\n      setCallback(!callback);\r\n      history.push('/'); //todo use <Redirect/>\r\n    } catch (err) {\r\n      alert(err.response.data.msg);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className='create_product'>\r\n      <div className='upload'>\r\n        <input type='file' name='file' id='file_up' onChange={handleUpload} />\r\n\r\n        {loading ? (\r\n          <div id='file_img'>\r\n            <Loading />\r\n          </div>\r\n        ) : (\r\n          <div id='file_img' style={styleUpload}>\r\n            <img src={images ? images.url : ''} alt='' />\r\n            <span onClick={handleDestroy}>X</span>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      <form onSubmit={handleSubmit}>\r\n        <div className='row'>\r\n          <label htmlFor='product_id'>Product ID</label>\r\n          <input\r\n            type='text'\r\n            name='product_id'\r\n            id='product_id'\r\n            required\r\n            value={product.product_id}\r\n            onChange={handleChange}\r\n            disabled={onEdit}\r\n          />\r\n        </div>\r\n        <div className='row'>\r\n          <label htmlFor='title'>Title</label>\r\n          <input\r\n            type='text'\r\n            name='title'\r\n            id='title'\r\n            required\r\n            value={product.title}\r\n            onChange={handleChange}\r\n          />\r\n        </div>\r\n        <div className='row'>\r\n          <label htmlFor='price'>Price</label>\r\n          <input\r\n            type='number'\r\n            name='price'\r\n            id='price'\r\n            required\r\n            value={product.price}\r\n            onChange={handleChange}\r\n          />\r\n        </div>\r\n        <div className='row'>\r\n          <label htmlFor='description'>Description</label>\r\n          <textarea\r\n            type='text'\r\n            name='description'\r\n            id='description'\r\n            required\r\n            value={product.description}\r\n            rows='5'\r\n            onChange={handleChange}\r\n          />\r\n        </div>\r\n        <div className='row'>\r\n          <label htmlFor='content'>Content</label>\r\n          <textarea\r\n            type='text'\r\n            name='content'\r\n            id='content'\r\n            required\r\n            value={product.content}\r\n            rows='7'\r\n            onChange={handleChange}\r\n          />\r\n        </div>\r\n        <div className='row'>\r\n          <label htmlFor='categories'>Categories</label>\r\n          <select\r\n            name='category'\r\n            value={product.category}\r\n            onChange={handleChange}\r\n          >\r\n            <option value=''>Please select a category</option>\r\n\r\n            {categories.map((category) => (\r\n              <option key={category._id} value={category._id}>\r\n                {category.name}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n\r\n        <button type='submit'>{onEdit ? 'Update' : 'Create'}</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default CreateProduct;\r\n","import React, { useContext } from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport { GlobalState } from '../../GlobalState';\r\n\r\nimport Products from './products/Products';\r\nimport DetailProduct from './detailProduct/DetailProduct';\r\nimport Cart from './cart/Cart';\r\nimport Login from './auth/Login';\r\nimport Register from './auth/Register';\r\nimport NotFound from './utils/not_found/NotFound';\r\nimport OrderHistory from './history/OrderHistory';\r\nimport OrderDetails from './history/OrderDetails';\r\nimport Categories from './categories/Categories';\r\nimport CreateProduct from './createProduct/CreateProduct';\r\n\r\nfunction Pages() {\r\n  const state = useContext(GlobalState);\r\n  const [isLogged] = state.userAPI.isLogged;\r\n  const [isAdmin] = state.userAPI.isAdmin;\r\n\r\n  return (\r\n    <div>\r\n      <Switch>\r\n        <Route exact path='/'>\r\n          <Products />\r\n        </Route>\r\n\r\n        <Route exact path='/detail/:id'>\r\n          <DetailProduct />\r\n        </Route>\r\n\r\n        <Route exact path='/cart'>\r\n          <Cart />\r\n        </Route>\r\n\r\n        <Route exact path='/login'>\r\n          {isLogged ? <NotFound /> : <Login />}\r\n        </Route>\r\n\r\n        <Route exact path='/register'>\r\n          {isLogged ? <NotFound /> : <Register />}\r\n        </Route>\r\n\r\n        <Route exact path='/category'>\r\n          {isAdmin ? <Categories /> : <NotFound />}\r\n        </Route>\r\n\r\n        <Route exact path='/create_product'>\r\n          {isAdmin ? <CreateProduct /> : <NotFound />}\r\n        </Route>\r\n\r\n        <Route exact path='/edit_product/:id'>\r\n          {isAdmin ? <CreateProduct /> : <NotFound />}\r\n        </Route>\r\n\r\n        <Route exact path='/history'>\r\n          {isLogged ? <OrderHistory /> : <NotFound />}\r\n        </Route>\r\n\r\n        <Route exact path='/history/:id'>\r\n          {isLogged ? <OrderDetails /> : <NotFound />}\r\n        </Route>\r\n\r\n        <Route path='*'>\r\n          <NotFound />\r\n        </Route>\r\n      </Switch>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Pages;\r\n","import { BrowserRouter as Router } from 'react-router-dom';\nimport { DataProvider } from './GlobalState';\nimport Header from './components/headers/Header';\nimport MainPages from './components/mainpages/Pages';\nfunction App() {\n  return (\n    <DataProvider>\n      <Router>\n        <div className='App'>\n          <Header />\n          <MainPages />\n        </div>\n      </Router>\n    </DataProvider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}