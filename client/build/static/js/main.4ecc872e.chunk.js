(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{40:function(e,t,c){},66:function(e,t,c){},67:function(e,t,c){"use strict";c.r(t);var r=c(1),n=c(22),a=c.n(n),s=(c(40),c(6)),i=c(3),o=c.n(i),j=c(5),u=c(2),d=c(8),l=c(14),b=c(4),O=c.n(b);var h=function(e){var t=Object(r.useState)(!1),c=Object(u.a)(t,2),n=c[0],a=c[1],s=Object(r.useState)(!1),i=Object(u.a)(s,2),b=i[0],h=i[1],p=Object(r.useState)([]),x=Object(u.a)(p,2),f=x[0],m=x[1],v=Object(r.useState)([]),g=Object(u.a)(v,2),y=g[0],w=g[1],k=function(){var t=Object(j.a)(o.a.mark((function t(c){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return",alert("Please login to continue buying"));case 2:if(!f.every((function(e){return e._id!==c._id}))){t.next=9;break}return m([].concat(Object(l.a)(f),[Object(d.a)(Object(d.a)({},c),{},{quantity:1})])),t.next=7,O.a.patch("/user/addcart",{cart:[].concat(Object(l.a)(f),[Object(d.a)(Object(d.a)({},c),{},{quantity:1})])},{headers:{Authorization:e}});case 7:t.next=10;break;case 9:alert("This product has been added to cart.");case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(r.useEffect)((function(){e&&function(){var t=Object(j.a)(o.a.mark((function t(){var c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O.a.get("/user/infor",{headers:{Authorization:e}});case 3:c=t.sent,a(!0),1===c.data.role?h(!0):h(!1),m(c.data.cart),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),alert(t.t0.response.data.msg);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}()()}),[e]),{isLogged:[n,a],isAdmin:[b,h],cart:[f,m],history:[y,w],addCart:k}};var p=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),c=t[0],n=t[1],a=Object(r.useState)(!1),s=Object(u.a)(a,2),i=s[0],d=s[1],l=Object(r.useState)(""),b=Object(u.a)(l,2),h=b[0],p=b[1],x=Object(r.useState)(""),f=Object(u.a)(x,2),m=f[0],v=f[1],g=Object(r.useState)(""),y=Object(u.a)(g,2),w=y[0],k=y[1],_=Object(r.useState)(1),A=Object(u.a)(_,2),P=A[0],C=A[1],N=Object(r.useState)(0),S=Object(u.a)(N,2),I=S[0],E=S[1];return Object(r.useEffect)((function(){(function(){var e=Object(j.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get("/api/products?limit=".concat(9*P,"&").concat(h,"&").concat(m,"&title[regex]=").concat(w));case 2:t=e.sent,n(t.data.products),E(t.data.number),console.log(t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[i,h,P,w,m]),{products:[c,n],callback:[i,d],category:[h,p],sort:[m,v],search:[w,k],page:[P,C],result:[I,E]}};var x=function(){var e=Object(r.useState)([]),t=Object(u.a)(e,2),c=t[0],n=t[1],a=Object(r.useState)(!1),s=Object(u.a)(a,2),i=s[0],d=s[1];return Object(r.useEffect)((function(){(function(){var e=Object(j.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get("/api/category");case 2:t=e.sent,n(t.data.msg);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[i]),{categories:[c,n],callback:[i,d]}},f=c(0),m=Object(r.createContext)(),v=function(e){var t=e.children,c=Object(r.useState)(!1),n=Object(u.a)(c,2),a=n[0],s=n[1];Object(r.useEffect)((function(){if(localStorage.getItem("firstLogin")){var e=function(){var t=Object(j.a)(o.a.mark((function t(){var c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.a.get("/user/refresh_token");case 2:c=t.sent,s(c.data.accessToken),setTimeout((function(){e()}),6e5);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();e()}}),[]);var i={token:[a,s],ProductsAPI:p(),userAPI:h(a),categoriesAPI:x()};return Object(f.jsx)(m.Provider,{value:i,children:t})},g=c.p+"static/media/menu.e8db7520.svg",y=c.p+"static/media/close.ea7c95d7.svg",w=c.p+"static/media/cart.d146d6c3.svg";var k=function(){var e=Object(r.useContext)(m),t=Object(u.a)(e.userAPI.isLogged,1)[0],c=Object(u.a)(e.userAPI.isAdmin,1)[0],n=Object(u.a)(e.userAPI.cart,1)[0],a=Object(r.useState)(!1),i=Object(u.a)(a,2),d=i[0],l=i[1],b=function(){var e=Object(j.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get("/user/logout");case 2:localStorage.removeItem("firstLogin"),window.location.href="/";case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h={left:d?0:"-100%"};return Object(f.jsxs)("header",{children:[Object(f.jsx)("div",{className:"menu",onClick:function(){return l(!d)},children:Object(f.jsx)("img",{src:g,alt:"",width:"30"})}),Object(f.jsx)("div",{className:"logo",children:Object(f.jsx)("h1",{children:Object(f.jsx)(s.b,{to:"/",children:c?"Admin":"Ecommerce Shop"})})}),Object(f.jsxs)("ul",{style:h,children:[Object(f.jsx)("li",{children:Object(f.jsx)(s.b,{to:"/",children:c?"Prodcucts":"Shop"})}),c&&Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("li",{children:Object(f.jsx)(s.b,{to:"/create_product",children:"Create Product"})}),Object(f.jsx)("li",{children:Object(f.jsx)(s.b,{to:"/category",children:"Categories"})})]}),t?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("li",{children:Object(f.jsx)(s.b,{to:"/history",children:"History"})}),Object(f.jsx)("li",{children:Object(f.jsx)(s.b,{to:"/",onClick:b,children:"Logout"})})]}):Object(f.jsx)("li",{children:Object(f.jsx)(s.b,{to:"/login",children:"Login -or- Register"})}),Object(f.jsx)("li",{onClick:function(){return l(!d)},children:Object(f.jsx)("img",{src:y,alt:"",width:"30",className:"menu"})})]}),c?"":Object(f.jsxs)("div",{className:"cart-icon",children:[Object(f.jsx)("span",{children:n.length}),Object(f.jsx)(s.b,{to:"/cart",children:Object(f.jsx)("img",{src:w,alt:"",width:"30"})})]})]})},_=c(7);var A=function(e){var t=e.product,c=e.deleteProduct,n=Object(r.useContext)(m),a=Object(u.a)(n.userAPI.isAdmin,1)[0],i=n.userAPI.addCart;return Object(f.jsx)("div",{className:"row_btn",children:a?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(s.b,{id:"btn_buy",to:"#!",onClick:function(){return c(t._id,t.images.public_id)},children:"Delete"}),Object(f.jsx)(s.b,{id:"btn_view",to:"/edit_product/".concat(t._id),children:"Edit"})]}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(s.b,{id:"btn_buy",to:"#!",onClick:function(){return i(t)},children:"Buy"}),Object(f.jsx)(s.b,{id:"btn_view",to:"/detail/".concat(t._id),children:"View"})]})})};var P=function(e){var t=e.product,c=e.isAdmin,r=e.deleteProduct,n=e.handleCheck;return Object(f.jsxs)("div",{className:"product_card",children:[c&&Object(f.jsx)("input",{type:"checkbox",checked:t.checked,onChange:function(){return n(t._id)}}),Object(f.jsx)("img",{src:t.images.url,alt:""}),Object(f.jsxs)("div",{className:"product_box",children:[Object(f.jsx)("h2",{title:t.title,children:t.title}),Object(f.jsxs)("span",{children:["$",t.price]}),Object(f.jsx)("p",{children:t.description})]}),Object(f.jsx)(A,{product:t,deleteProduct:r})]})};c(66);var C=function(){var e=Object(r.useState)("Loading"),t=Object(u.a)(e,2),c=t[0],n=t[1];return Object(r.useEffect)((function(){var e=setTimeout((function(){"Loading..."===c&&n("Loading"),n((function(e){return e+"."}))}),1e3);return function(){clearTimeout(e)}}),[c]),Object(f.jsx)("div",{className:"loading",children:c})};var N=function(){var e=Object(r.useContext)(m),t=Object(u.a)(e.categoriesAPI.categories,1)[0],c=Object(u.a)(e.ProductsAPI.category,2),n=(c[0],c[1]),a=Object(u.a)(e.ProductsAPI.sort,2),s=(a[0],a[1]),i=Object(u.a)(e.ProductsAPI.search,2),o=i[0],j=i[1];return Object(f.jsxs)("div",{className:"filter_menu",children:[Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("span",{children:"Filters: "}),Object(f.jsxs)("select",{name:"category",onChange:function(e){n(e.target.value),j("")},children:[Object(f.jsx)("option",{value:"",children:"All Products"}),t.map((function(e){return Object(f.jsx)("option",{value:"category="+e._id,children:e.name},e._id)}))]})]}),Object(f.jsx)("input",{type:"text",value:o,placeholder:"Search Here!",onChange:function(e){return j(e.target.value)}}),Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("span",{children:"Filters: "}),Object(f.jsxs)("select",{name:"sort",onChange:function(e){return s(e.target.value)},children:[Object(f.jsx)("option",{value:"",children:"Newest"}),Object(f.jsx)("option",{value:"sort=oldest",children:"Oldest"}),Object(f.jsx)("option",{value:"sort=-sold",children:"Best Sale"}),Object(f.jsx)("option",{value:"sort=-price",children:"Price: high to low"}),Object(f.jsx)("option",{value:"sort=price",children:"Price: low to high"})]})]})]})};var S=function(){var e=Object(r.useContext)(m),t=Object(u.a)(e.ProductsAPI.page,2),c=t[0],n=t[1],a=Object(u.a)(e.ProductsAPI.result,1)[0];return Object(f.jsx)("div",{className:"load_more",children:a<9*c?"":Object(f.jsx)("button",{onClick:function(e){return n(c+1)},children:"Load more"})})};var I=function(){var e=Object(r.useContext)(m),t=Object(u.a)(e.ProductsAPI.products,2),c=t[0],n=t[1],a=Object(u.a)(e.userAPI.isAdmin,1)[0],s=Object(u.a)(e.token,1)[0],i=Object(u.a)(e.ProductsAPI.callback,2),d=i[0],b=i[1],h=Object(r.useState)(!1),p=Object(u.a)(h,2),x=p[0],v=p[1],g=Object(r.useState)(!1),y=Object(u.a)(g,2),w=y[0],k=y[1],_=function(){var e=Object(j.a)(o.a.mark((function e(t,c){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v(!0),e.next=3,O.a.post("/api/destroy",{public_id:c},{headers:{Authorization:s}});case 3:return e.next=5,O.a.delete("/api/products/".concat(t),{headers:{Authorization:s}});case 5:b(!d),v(!1);case 7:case"end":return e.stop()}}),e)})));return function(t,c){return e.apply(this,arguments)}}(),A=function(){var e=Object(j.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.forEach((function(e){e._id===t&&(e.checked=!e.checked)})),n(Object(l.a)(c));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return x?Object(f.jsx)(C,{}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(N,{}),a&&Object(f.jsxs)("div",{className:"delete-all",children:[Object(f.jsx)("span",{children:"Select All"}),Object(f.jsx)("input",{type:"checkbox",value:w,onChange:function(){c.forEach((function(e){e.checked=!w})),n(Object(l.a)(c)),k(!w)}}),Object(f.jsx)("button",{onClick:function(){c.forEach((function(e){e.checked&&_(e._id,e.images.public_id)}))},children:"Delete All"})]}),Object(f.jsx)("div",{className:"products",children:c.map((function(e){return Object(f.jsx)(P,{product:e,isAdmin:a,deleteProduct:_,handleCheck:A},e._id)}))}),Object(f.jsx)(S,{}),0===c.length&&Object(f.jsx)(C,{})]})};var E=function(){var e=Object(_.g)().id,t=Object(r.useContext)(m),c=t.userAPI.addCart,n=Object(u.a)(t.ProductsAPI.products,1)[0],a=Object(r.useState)([]),i=Object(u.a)(a,2),o=i[0],j=i[1];return Object(r.useEffect)((function(){var t=n.find((function(t){return t._id===e}));t&&j(t)}),[n,e]),0===o.length?null:Object(f.jsxs)(f.Fragment,{children:[Object(f.jsxs)("div",{className:"detail",children:[Object(f.jsx)("img",{src:o.images.url,alt:""}),Object(f.jsxs)("div",{className:"box-detail",children:[Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("h2",{children:o.title}),Object(f.jsxs)("h6",{children:["#id: ",o.product_id]})]}),Object(f.jsxs)("span",{children:["$ ",o.price]}),Object(f.jsx)("p",{children:o.description}),Object(f.jsx)("p",{children:o.content}),Object(f.jsxs)("p",{children:["sold: ",o.sold]}),Object(f.jsx)(s.b,{to:"/cart",className:"cart",onClick:function(){return c(o)},children:"Buy Now"})]})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("h2",{children:"Related products"}),Object(f.jsx)("div",{className:"products",children:n.map((function(e){return e.category===o.category?Object(f.jsx)(P,{product:e},e._id):null}))})]})]})},q=c(35);var z=function(){var e=Object(r.useContext)(m),t=Object(u.a)(e.token,1)[0],c=Object(u.a)(e.userAPI.cart,2),n=c[0],a=c[1],s=Object(r.useState)(0),i=Object(u.a)(s,2),d=i[0],b=i[1];Object(r.useEffect)((function(){!function(){var e=n.reduce((function(e,t){return e+t.price*t.quantity}),0);b(e)}()}),[n]);var h=function(){var e=Object(j.a)(o.a.mark((function e(c){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.patch("/user/addcart",{cart:c},{headers:{Authorization:t}});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(j.a)(o.a.mark((function e(c){var r,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.id,s=c.payer.address,e.next=3,O.a.post("/api/payment",{cart:n,paymentID:r,address:s},{headers:{Authorization:t}});case 3:a([]),h([]),alert("You have successfully placed an order.");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return 0===n.length?Object(f.jsx)("h2",{style:{textAlign:"center",fontSize:"4rem"},children:"Cart Empty"}):Object(f.jsxs)("div",{children:[n.map((function(e){return Object(f.jsxs)("div",{className:"detail cart",children:[Object(f.jsx)("img",{src:e.images.url,alt:""}),Object(f.jsxs)("div",{className:"box-detail",children:[Object(f.jsx)("h2",{children:e.title}),Object(f.jsxs)("h3",{children:["$ ",e.price*e.quantity]}),Object(f.jsx)("p",{children:e.description}),Object(f.jsx)("p",{children:e.content}),Object(f.jsxs)("div",{className:"amount",children:[Object(f.jsxs)("button",{onClick:function(){var t;t=e._id,n.forEach((function(e){t===e._id&&(1===e.quantity?e.quantity=1:e.quantity-=1)})),a(Object(l.a)(n)),h(n)},children:[" ","-"," "]}),Object(f.jsx)("span",{children:e.quantity}),Object(f.jsxs)("button",{onClick:function(){var t;t=e._id,n.forEach((function(e){t===e._id&&(e.quantity+=1)})),a(Object(l.a)(n)),h(n)},children:[" ","+"," "]})]}),Object(f.jsx)("div",{className:"delete",onClick:function(){var t;t=e._id,window.confirm("Do you want to delete this product")&&(n.forEach((function(e,c){e._id===t&&n.splice(c,1)})),a(Object(l.a)(n)),h(n))},children:"X"})]})]},e._id)})),Object(f.jsxs)("div",{className:"total",children:[Object(f.jsxs)("h3",{children:["Total: $ ",d]}),Object(f.jsx)(q.PayPalButton,{amount:d,style:{size:"small",color:"blue",shape:"rect",label:"checkout",tagline:!1},onSuccess:function(e){console.log(e),p(e),alert("Transaction completed by "+e.payer.name.given_name)}})]})]})},D=c(15);var F=function(){var e=Object(r.useState)({email:"",password:""}),t=Object(u.a)(e,2),c=t[0],n=t[1],a=function(e){var t=e.target,r=t.name,a=t.value;n(Object(d.a)(Object(d.a)({},c),{},Object(D.a)({},r,a)))},i=function(){var e=Object(j.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,O.a.post("/user/login",Object(d.a)({},c));case 4:localStorage.setItem("firstLogin",!0),window.location.href="/",e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),alert(e.t0.response.data.msg);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)("div",{className:"login-page",children:Object(f.jsxs)("form",{onSubmit:i,children:[Object(f.jsx)("h2",{children:"Login"}),Object(f.jsx)("input",{type:"email",name:"email",required:!0,placeholder:"Email",value:c.email,onChange:a}),Object(f.jsx)("input",{type:"password",name:"password",required:!0,autoComplete:"on",placeholder:"Password",value:c.password,onChange:a}),Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("button",{type:"submit",children:"Login"}),Object(f.jsx)(s.b,{to:"/register",children:"Register"})]})]})})};var L=function(){var e=Object(r.useState)({name:"",email:"",password:""}),t=Object(u.a)(e,2),c=t[0],n=t[1],a=function(e){var t=e.target,r=t.name,a=t.value;n(Object(d.a)(Object(d.a)({},c),{},Object(D.a)({},r,a)))},i=function(){var e=Object(j.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,O.a.post("/user/register",Object(d.a)({},c));case 4:localStorage.setItem("firstLogin",!0),window.location.href="/",e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),alert(e.t0.response.data.msg);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)("div",{className:"login-page",children:Object(f.jsxs)("form",{onSubmit:i,children:[Object(f.jsx)("h2",{children:"Register"}),Object(f.jsx)("input",{type:"text",name:"name",required:!0,placeholder:"Name",value:c.name,onChange:a}),Object(f.jsx)("input",{type:"email",name:"email",required:!0,placeholder:"Email",value:c.email,onChange:a}),Object(f.jsx)("input",{type:"password",name:"password",required:!0,autoComplete:"on",placeholder:"Password",value:c.password,onChange:a}),Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("button",{type:"submit",children:"Register"}),Object(f.jsx)(s.b,{to:"/login",children:"Login"})]})]})})};var T=function(){return Object(f.jsx)("div",{children:"404 | not found"})};var B=function(){var e=Object(r.useContext)(m),t=Object(u.a)(e.userAPI.history,2),c=t[0],n=t[1],a=Object(u.a)(e.userAPI.isAdmin,1)[0],i=Object(u.a)(e.token,1)[0];return Object(r.useEffect)((function(){(function(){var e=Object(j.a)(o.a.mark((function e(){var t,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=7;break}return e.next=3,O.a.get("/api/payment",{headers:{Authorization:i}});case 3:t=e.sent,n(t.data),e.next=11;break;case 7:return e.next=9,O.a.get("/user/history",{headers:{Authorization:i}});case 9:c=e.sent,n(c.data);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[i,a,n]),Object(f.jsxs)("div",{className:"history-page",children:[Object(f.jsx)("h2",{children:"History"}),Object(f.jsxs)("h4",{children:["You have ",c.length," orders"]}),Object(f.jsxs)("table",{children:[Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{children:"Payment ID"}),Object(f.jsx)("th",{children:"Date of Purchased"}),Object(f.jsx)("th",{})]})}),Object(f.jsx)("tbody",{children:c.map((function(e){return Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:e.paymentID}),Object(f.jsx)("td",{children:new Date(e.createdAt).toLocaleDateString()}),Object(f.jsx)("td",{children:Object(f.jsx)(s.b,{to:"/history/".concat(e._id),children:"View"})})]},e._id)}))})]})]})};var R=function(){var e=Object(r.useContext)(m),t=Object(u.a)(e.userAPI.history,1)[0],c=Object(r.useState)([]),n=Object(u.a)(c,2),a=n[0],s=n[1],i=Object(_.g)().id;return Object(r.useEffect)((function(){i&&t.forEach((function(e){e._id===i&&s(e)}))}),[i,t]),0===a.length?null:Object(f.jsxs)("div",{className:"history-page",children:[Object(f.jsxs)("table",{children:[Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{children:"Name"}),Object(f.jsx)("th",{children:"Address"}),Object(f.jsx)("th",{children:"Postal Code"}),Object(f.jsx)("th",{children:"Country Code"})]})}),Object(f.jsx)("tbody",{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:a.name}),Object(f.jsx)("td",{children:a.address.address_line_1+"-"+a.address.admin_area_2}),Object(f.jsx)("td",{children:a.address.postal_code}),Object(f.jsx)("td",{children:a.address.country_code})]})})]}),Object(f.jsxs)("table",{children:[Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{}),Object(f.jsx)("th",{children:"Products"}),Object(f.jsx)("th",{children:"Quantity"}),Object(f.jsx)("th",{children:"Price"})]})}),Object(f.jsx)("tbody",{children:a.cart.map((function(e){return Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:Object(f.jsx)("img",{src:e.images.url,alt:""})}),Object(f.jsx)("td",{children:e.title}),Object(f.jsx)("td",{children:e.quantity}),Object(f.jsxs)("td",{children:["$ ",e.price*e.quantity]})]},e._id)}))})]})]})};var Y=function(){var e=Object(r.useContext)(m),t=Object(u.a)(e.token,1)[0],c=Object(u.a)(e.categoriesAPI.categories,1)[0],n=Object(u.a)(e.categoriesAPI.callback,2),a=n[0],s=n[1],i=Object(r.useState)(""),d=Object(u.a)(i,2),l=d[0],b=d[1],h=Object(r.useState)(""),p=Object(u.a)(h,2),x=p[0],v=p[1],g=Object(r.useState)(!1),y=Object(u.a)(g,2),w=y[0],k=y[1],_=function(){var e=Object(j.a)(o.a.mark((function e(c){var r,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),e.prev=1,w){e.next=9;break}return e.next=5,O.a.post("/api/category",{name:l},{headers:{Authorization:t}});case 5:r=e.sent,alert(r.data.msg),e.next=13;break;case 9:return e.next=11,O.a.put("/api/category/".concat(x),{name:l},{headers:{Authorization:t}});case 11:n=e.sent,alert(n.data.msg);case 13:k(!1),s(!a),b(""),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),alert(e.t0.response.data.msg);case 21:case"end":return e.stop()}}),e,null,[[1,18]])})));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(j.a)(o.a.mark((function e(c){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.delete("/api/category/".concat(c),{headers:{Authorization:t}});case 3:r=e.sent,alert(r.data.msg),s(!a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert(e.t0.response.data.msg);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:"categories",children:[Object(f.jsxs)("form",{onSubmit:_,children:[Object(f.jsx)("label",{htmlFor:"category",children:"Category"}),Object(f.jsx)("input",{type:"text",name:"category",value:l,required:!0,onChange:function(e){return b(e.target.value)}}),Object(f.jsx)("button",{type:"submit",children:w?"Update":"Create"})]}),Object(f.jsx)("div",{className:"col",children:c.map((function(e){return Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("p",{children:e.name}),Object(f.jsxs)("div",{children:[Object(f.jsx)("button",{onClick:function(){return function(e,t){b(t),v(e),k(!0)}(e._id,e.name)},children:"Edit"}),Object(f.jsx)("button",{onClick:function(){return A(e._id)},children:"Delete"})]})]},e._id)}))})]})},$={product_id:"",title:"",price:0,description:"",content:"",category:"",_id:""};var H=function(){var e=Object(r.useContext)(m),t=Object(r.useState)($),c=Object(u.a)(t,2),n=c[0],a=c[1],s=Object(u.a)(e.categoriesAPI.categories,1)[0],i=Object(r.useState)(!1),l=Object(u.a)(i,2),b=l[0],h=l[1],p=Object(r.useState)(!1),x=Object(u.a)(p,2),v=x[0],g=x[1],y=Object(u.a)(e.userAPI.isAdmin,1)[0],w=Object(u.a)(e.token,1)[0],k=Object(u.a)(e.ProductsAPI.products,1)[0],A=Object(r.useState)(!1),P=Object(u.a)(A,2),N=P[0],S=P[1],I=Object(u.a)(e.ProductsAPI.callback,2),E=I[0],q=I[1],z=Object(_.f)(),F=Object(_.g)().id;Object(r.useEffect)((function(){F?(S(!0),k.forEach((function(e){e._id===F&&(a(e),g(e.images))}))):(S(!1),a($),g(!1))}),[F,k]);var L={display:v?"block":"none"},T=function(){var e=Object(j.a)(o.a.mark((function e(t){var c,r,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,y){e.next=4;break}return e.abrupt("return",alert("You are not an Admin."));case 4:if(c=t.target.files[0]){e.next=7;break}return e.abrupt("return",alert("No file has been selected."));case 7:if(!(c.size>1048576)){e.next=9;break}return e.abrupt("return",alert("File is too large."));case 9:if("image/png"===c.type||"image/jpeg"===c.type){e.next=11;break}return e.abrupt("return",alert("Worng file type."));case 11:return(r=new FormData).append("file",c),h(!0),e.next=16,O.a.post("/api/upload",r,{headers:{"content-type":"multipart/form-data",Authorization:w}});case 16:n=e.sent,h(!1),g(n.data),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(1),alert(e.t0.response.data.msg);case 24:case"end":return e.stop()}}),e,null,[[1,21]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(j.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,y){e.next=3;break}return e.abrupt("return",alert("You are not an Admin."));case 3:return h(!0),e.next=6,O.a.post("/api/destroy",{public_id:v.public_id},{headers:{Authorization:w}});case 6:h(!1),g(!1),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),alert(e.t0.response.data.msg);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),R=function(e){var t=e.target,c=t.name,r=t.value;a(Object(d.a)(Object(d.a)({},n),{},Object(D.a)({},c,r)))},Y=function(){var e=Object(j.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,y){e.next=4;break}return e.abrupt("return",alert("You are not an Admin."));case 4:if(v){e.next=6;break}return e.abrupt("return",alert("No images are uploaded."));case 6:if(!N){e.next=11;break}return e.next=9,O.a.put("/api/products/".concat(n._id),Object(d.a)(Object(d.a)({},n),{},{images:v}),{headers:{Authorization:w}});case 9:e.next=13;break;case 11:return e.next=13,O.a.post("/api/products",Object(d.a)(Object(d.a)({},n),{},{images:v}),{headers:{Authorization:w}});case 13:q(!E),z.push("/"),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(1),alert(e.t0.response.data.msg);case 20:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:"create_product",children:[Object(f.jsxs)("div",{className:"upload",children:[Object(f.jsx)("input",{type:"file",name:"file",id:"file_up",onChange:T}),b?Object(f.jsx)("div",{id:"file_img",children:Object(f.jsx)(C,{})}):Object(f.jsxs)("div",{id:"file_img",style:L,children:[Object(f.jsx)("img",{src:v?v.url:"",alt:""}),Object(f.jsx)("span",{onClick:B,children:"X"})]})]}),Object(f.jsxs)("form",{onSubmit:Y,children:[Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("label",{htmlFor:"product_id",children:"Product ID"}),Object(f.jsx)("input",{type:"text",name:"product_id",id:"product_id",required:!0,value:n.product_id,onChange:R,disabled:N})]}),Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("label",{htmlFor:"title",children:"Title"}),Object(f.jsx)("input",{type:"text",name:"title",id:"title",required:!0,value:n.title,onChange:R})]}),Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("label",{htmlFor:"price",children:"Price"}),Object(f.jsx)("input",{type:"number",name:"price",id:"price",required:!0,value:n.price,onChange:R})]}),Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("label",{htmlFor:"description",children:"Description"}),Object(f.jsx)("textarea",{type:"text",name:"description",id:"description",required:!0,value:n.description,rows:"5",onChange:R})]}),Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("label",{htmlFor:"content",children:"Content"}),Object(f.jsx)("textarea",{type:"text",name:"content",id:"content",required:!0,value:n.content,rows:"7",onChange:R})]}),Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("label",{htmlFor:"categories",children:"Categories"}),Object(f.jsxs)("select",{name:"category",value:n.category,onChange:R,children:[Object(f.jsx)("option",{value:"",children:"Please select a category"}),s.map((function(e){return Object(f.jsx)("option",{value:e._id,children:e.name},e._id)}))]})]}),Object(f.jsx)("button",{type:"submit",children:N?"Update":"Create"})]})]})};var J=function(){var e=Object(r.useContext)(m),t=Object(u.a)(e.userAPI.isLogged,1)[0],c=Object(u.a)(e.userAPI.isAdmin,1)[0];return Object(f.jsx)("div",{children:Object(f.jsxs)(_.c,{children:[Object(f.jsx)(_.a,{exact:!0,path:"/",children:Object(f.jsx)(I,{})}),Object(f.jsx)(_.a,{exact:!0,path:"/detail/:id",children:Object(f.jsx)(E,{})}),Object(f.jsx)(_.a,{exact:!0,path:"/cart",children:Object(f.jsx)(z,{})}),Object(f.jsx)(_.a,{exact:!0,path:"/login",children:t?Object(f.jsx)(T,{}):Object(f.jsx)(F,{})}),Object(f.jsx)(_.a,{exact:!0,path:"/register",children:t?Object(f.jsx)(T,{}):Object(f.jsx)(L,{})}),Object(f.jsx)(_.a,{exact:!0,path:"/category",children:c?Object(f.jsx)(Y,{}):Object(f.jsx)(T,{})}),Object(f.jsx)(_.a,{exact:!0,path:"/create_product",children:c?Object(f.jsx)(H,{}):Object(f.jsx)(T,{})}),Object(f.jsx)(_.a,{exact:!0,path:"/edit_product/:id",children:c?Object(f.jsx)(H,{}):Object(f.jsx)(T,{})}),Object(f.jsx)(_.a,{exact:!0,path:"/history",children:t?Object(f.jsx)(B,{}):Object(f.jsx)(T,{})}),Object(f.jsx)(_.a,{exact:!0,path:"/history/:id",children:t?Object(f.jsx)(R,{}):Object(f.jsx)(T,{})}),Object(f.jsx)(_.a,{path:"*",children:Object(f.jsx)(T,{})})]})})};var U=function(){return Object(f.jsx)(v,{children:Object(f.jsx)(s.a,{children:Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)(k,{}),Object(f.jsx)(J,{})]})})})};a.a.render(Object(f.jsx)(U,{}),document.getElementById("root"))}},[[67,1,2]]]);
//# sourceMappingURL=main.4ecc872e.chunk.js.map